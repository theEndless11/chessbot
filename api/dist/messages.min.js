"use strict";var mongoose=require("mongoose"),Message=require("../message"),MONGO_URI=process.env.MONGO_URI,connectToDatabase=function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(mongoose.connections[0].readyState)return e.abrupt("return",mongoose.connections[0]);e.next=2;break;case 2:return e.abrupt("return",mongoose.connect(MONGO_URI,{useNewUrlParser:!0,useUnifiedTopology:!0}));case 3:case"end":return e.stop()}})};module.exports=function(r,n){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if("GET"===r.method)return e.prev=1,e.next=4,regeneratorRuntime.awrap(connectToDatabase());e.next=16;break;case 4:return e.next=6,regeneratorRuntime.awrap(Message.find());case 6:t=e.sent,n.status(200).json(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error fetching messages:",e.t0),n.status(500).json({error:"Failed to fetch messages"});case 14:e.next=17;break;case 16:n.status(405).json({error:"Method not allowed"});case 17:case"end":return e.stop()}},null,null,[[1,10]])};
//# sourceMappingURL=messages.min.js.map
